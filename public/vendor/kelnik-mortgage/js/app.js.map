{"version":3,"file":"/js/app.js","mappings":"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","sources":["webpack://multi-kelnik-mortgage/./resources/js/controllers/fields/mortgage-variants.js","webpack://multi-kelnik-mortgage/./resources/js/app.js"],"sourcesContent":["export default class extends window.Controller {\n    static get targets() {\n        return [];\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.modal = '';\n        this.form = '';\n    }\n\n    connect() {\n        this.modal = document.getElementById(`screen-modal-${this.data.get('modal')}`);\n        this.form = this.modal?.querySelector('form');\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        if (this.form) {\n            this.form.addEventListener('submit', (event) => {\n                return this.submitForm(event);\n            });\n        }\n    }\n\n    openModal(event) {\n        event.preventDefault();\n        this.fillModal(event.target.closest('a').dataset.key);\n\n        window.Bootstrap.Modal.getOrCreateInstance(this.modal).show();\n    }\n\n    closeModal() {\n        window.Bootstrap.Modal.getOrCreateInstance(this.modal).hide();\n    }\n\n    updateActive(event) {\n        const isActive = event.target.checked || false;\n        const inp = event.target.closest('tr').querySelector('input[data-field=\"active\"]');\n\n        if (typeof inp !== 'undefined') {\n            inp.value = isActive ? 1 : 0;\n        }\n    }\n\n    updateTitle(event) {\n        const val = event.target.value;\n        const inp = event.target.closest('tr').querySelector('input[data-field=\"title\"]');\n\n        if (typeof inp !== 'undefined') {\n            inp.value = val;\n        }\n    }\n\n    fillModal(key) {\n        const data = this.getDataByIndex(key);\n\n        data.active = parseInt(data.active);\n\n        this.form.querySelector('input[name=\"variant[index]\"]').value = key;\n        this.form.querySelector('input[name=\"variant[title]\"]').value = data.title;\n        this.form.querySelector('input[name=\"variant[active]\"]').checked = Boolean(data.active);\n        this.form.querySelectorAll('input[name=\"variant[showBanks]\"]')?.forEach((el) => {\n            const label = el.closest('label');\n\n            if (!label) {\n                return;\n            }\n\n            [el, label].forEach((element) => {\n                element.removeAttribute('checked');\n                element.classList.remove('active');\n            });\n\n            el.checked = false;\n\n            if (el.value !== data.showBanks) {\n                return;\n            }\n\n            label.classList.add('active');\n            label.setAttribute('checked', 'checked');\n            label.dispatchEvent(new Event('change'));\n            el.checked = true;\n        });\n\n        const textField = this.form.querySelector('input[name=\"variant[text]\"]');\n        const textController = textField.closest('div[data-controller=\"kelnik-quill\"]');\n        const quill = this.application.getControllerForElementAndIdentifier(textController, 'kelnik-quill');\n\n        quill.editor.root.innerHTML = data.text;\n    }\n\n    fillMatrixRow(index, data) {\n        const inp = this.element.querySelector(`input[data-key=\"${index}\"][data-field=\"title\"]`);\n\n        if (typeof inp === 'undefined') {\n            return;\n        }\n\n        const tr = inp.closest('tr');\n\n        tr.querySelector('input[data-field=\"title_\"]').value = data.title;\n        tr.querySelector('input[data-field=\"active_\"]').checked = Boolean(data.active);\n\n        Object.keys(data).map((key) => {\n            this.element.querySelector(`input[data-key=\"${index}\"][data-field=\"${key}\"]`).value = data[key];\n        });\n    }\n\n    getDataByIndex(index) {\n        const inp = this.element.querySelectorAll(`input[data-key=\"${index}\"]`);\n        const res = {\n            title    : '',\n            text     : '',\n            active   : 0,\n            showBanks: ''\n        };\n\n        if (!inp.length) {\n            return res;\n        }\n\n        [...inp].forEach((el) => {\n            if (typeof el.dataset.field !== 'string' || !Object.hasOwnProperty.call(res, el.dataset.field)) {\n                return;\n            }\n            res[el.dataset.field] = el.value;\n        });\n\n        return res;\n    }\n\n    submitForm(event) {\n        event.preventDefault();\n        const formData = new FormData(event.target);\n\n        this.fillMatrixRow(formData.get('variant[index]') || 1,\n            {\n                title    : formData.get('variant[title]') || '',\n                text     : formData.get('variant[text]') || '',\n                active   : Number(formData.get('variant[active]') !== null),\n                showBanks: formData.get('variant[showBanks]')\n            });\n        this.closeModal();\n    }\n}\n","import MortgageVariants from './controllers/fields/mortgage-variants';\n\nwindow.application.register('kelnik-mortgage-variants', MortgageVariants);\n"],"names":["window","Controller","_default","props","_this","_classCallCheck","_super","call","modal","form","key","get","value","_this$modal","this","document","getElementById","concat","data","querySelector","bindEvents","_this2","addEventListener","event","submitForm","preventDefault","fillModal","target","closest","dataset","Bootstrap","Modal","getOrCreateInstance","show","hide","isActive","checked","inp","val","_this$form$querySelec","getDataByIndex","active","parseInt","title","Boolean","querySelectorAll","forEach","el","label","element","removeAttribute","classList","remove","showBanks","add","setAttribute","dispatchEvent","Event","textController","application","getControllerForElementAndIdentifier","editor","root","innerHTML","text","index","_this3","tr","Object","keys","map","res","length","_toConsumableArray","field","hasOwnProperty","formData","FormData","fillMatrixRow","Number","closeModal","register","MortgageVariants"],"sourceRoot":""}