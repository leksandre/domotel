"use strict";(self.webpackChunkmulti_kelnik_mortgage=self.webpackChunkmulti_kelnik_mortgage||[]).push([[773],{745:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(i,"string"),"symbol"===t(a)?a:String(a)),o)}var i,a}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function i(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=a(e);if(r){var i=a(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(u,window.Controller);var r,a,l,c=i(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,t)).modal="",e.form="",e}return r=u,l=[{key:"targets",get:function(){return[]}}],(a=[{key:"connect",value:function(){var t;this.modal=document.getElementById("screen-modal-".concat(this.data.get("modal"))),this.form=null===(t=this.modal)||void 0===t?void 0:t.querySelector("form"),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this;this.form&&this.form.addEventListener("submit",(function(e){return t.submitForm(e)}))}},{key:"openModal",value:function(t){t.preventDefault(),this.fillModal(t.target.closest("a").dataset.key),window.Bootstrap.Modal.getOrCreateInstance(this.modal).show()}},{key:"closeModal",value:function(){window.Bootstrap.Modal.getOrCreateInstance(this.modal).hide()}},{key:"updateActive",value:function(t){var e=t.target.checked||!1,r=t.target.closest("tr").querySelector('input[data-field="active"]');void 0!==r&&(r.value=e?1:0)}},{key:"updateTitle",value:function(t){var e=t.target.value,r=t.target.closest("tr").querySelector('input[data-field="title"]');void 0!==r&&(r.value=e)}},{key:"fillModal",value:function(t){var e,r=this.getDataByIndex(t);r.active=parseInt(r.active),this.form.querySelector('input[name="variant[index]"]').value=t,this.form.querySelector('input[name="variant[title]"]').value=r.title,this.form.querySelector('input[name="variant[active]"]').checked=Boolean(r.active),null===(e=this.form.querySelectorAll('input[name="variant[showBanks]"]'))||void 0===e||e.forEach((function(t){var e=t.closest("label");e&&([t,e].forEach((function(t){t.removeAttribute("checked"),t.classList.remove("active")})),t.checked=!1,t.value===r.showBanks&&(e.classList.add("active"),e.setAttribute("checked","checked"),e.dispatchEvent(new Event("change")),t.checked=!0))}));var n=this.form.querySelector('input[name="variant[text]"]').closest('div[data-controller="kelnik-quill"]');this.application.getControllerForElementAndIdentifier(n,"kelnik-quill").editor.root.innerHTML=r.text}},{key:"fillMatrixRow",value:function(t,e){var r=this,n=this.element.querySelector('input[data-key="'.concat(t,'"][data-field="title"]'));if(void 0!==n){var o=n.closest("tr");o.querySelector('input[data-field="title_"]').value=e.title,o.querySelector('input[data-field="active_"]').checked=Boolean(e.active),Object.keys(e).map((function(n){r.element.querySelector('input[data-key="'.concat(t,'"][data-field="').concat(n,'"]')).value=e[n]}))}}},{key:"getDataByIndex",value:function(t){var r=this.element.querySelectorAll('input[data-key="'.concat(t,'"]')),n={title:"",text:"",active:0,showBanks:""};return r.length?(e(r).forEach((function(t){"string"==typeof t.dataset.field&&Object.hasOwnProperty.call(n,t.dataset.field)&&(n[t.dataset.field]=t.value)})),n):n}},{key:"submitForm",value:function(t){t.preventDefault();var e=new FormData(t.target);this.fillMatrixRow(e.get("variant[index]")||1,{title:e.get("variant[title]")||"",text:e.get("variant[text]")||"",active:Number(null!==e.get("variant[active]")),showBanks:e.get("variant[showBanks]")}),this.closeModal()}}])&&n(r.prototype,a),l&&n(r,l),Object.defineProperty(r,"prototype",{writable:!1}),u}();window.application.register("kelnik-mortgage-variants",l)}},function(t){var e;e=745,t(t.s=e)}]);
//# sourceMappingURL=app.js.map