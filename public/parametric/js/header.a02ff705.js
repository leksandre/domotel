"use strict";(self["webpackChunkparametric"]=self["webpackChunkparametric"]||[]).push([[19],{2270:function(t,e,s){s.r(e);var i=s(4249),h=s(8396);const n=new i.Z,r="is-fixed",o="header_theme_transparent",c="header_theme_no-shadow",a="header_theme_fullscreen",l=document.documentElement;class d{constructor(){this.currentTargetScrollVersion="",this.scrollPosition=0,this.sections=[],this.isOpenFilter=!1,this.section=[...document.querySelectorAll(".j-anchor-section")]}init(t){this.header=t.headerWrap,this.targetScroll=t.targetScroll,this.heightHeader=this.header.offsetHeight,this.noShadowHeader=this.header.classList.contains("j-header-alternative"),this._initState(),this._subscribes(),this._bindEvents()}_bindEvents(){window.addEventListener("scroll",h.c.debounce((()=>{this.isOpenFilter||(this._changeState(),this._changeStateAnchor())}),10)),window.addEventListener("resize",h.c.debounce((()=>{this.isOpenFilter||(this._setHeight(),this._changeState(),this._changeStateAnchor())}),10))}_subscribes(){n.subscribe("navigation:ready",(()=>{this._setHeight()})),n.subscribe("scrollBy:start",(()=>{this.scrollByStart=!0})),n.subscribe("scrollBy:finish",(()=>{this.scrollByStart=!1}))}_initState(){this.noShadowHeader||this._changeState(),this._checkFullScreenNavigation(),this._setHeight()}_checkFullScreenNavigation(){const t=this.header.querySelector(".j-navigation-fullscreen__menu");t&&!this.header.classList.contains(a)&&this.header.classList.add(a)}_setHeight(){l.style.setProperty("--header-height",`${this.header.clientHeight}px`)}_changeState(){this.scrollPosition=window.scrollY,this._isScrollInTarget()?(this.header.classList.remove(r),"3"!==this.currentTargetScrollVersion&&this.header.classList.add(o)):(this.header.classList.add(r),this.header.classList.remove(o)),this.prevScrollPosition=this.scrollPosition,this.scrollPosition<100&&this.noShadowHeader?this.header.classList.add(c):this.header.classList.remove(c)}_isScrollDown(){const t=1;return this.scrollPosition>this.heightHeader&&this.scrollPosition-this.prevScrollPosition>t}_isScrollInTarget(){var t;return!!(null===(t=this.targetScroll)||void 0===t?void 0:t.length)&&this.targetScroll.some((t=>{const e=t.getBoundingClientRect().top<=0&&t.getBoundingClientRect().top+t.getBoundingClientRect().height>=0;return e&&(this.currentTargetScrollVersion=t.dataset["version"]||""),e}))}_changeStateAnchor(){this.section.length&&this.section.forEach((t=>{const e=window.innerHeight/3,s=t.getBoundingClientRect().top+pageYOffset-e;this.scrollPosition>s&&(this.sections.includes(t)||this.sections.push(t)),this.scrollPosition<s&&this.sections.includes(t)&&this.sections.splice(this.sections.length-1,1);const i=!!this.sections.length&&`#${this.sections[this.sections.length-1].id}`;!this.scrollByStart&&i&&n.publish("anchorChangeSection",i)}))}}e["default"]=d}}]);