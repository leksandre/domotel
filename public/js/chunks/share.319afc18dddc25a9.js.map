{"version":3,"file":"js/chunks/share.319afc18dddc25a9.js","mappings":"89BAGA,IAAMA,EAAa,UACbC,EAAe,YAGfC,EAAK,oBAAAA,K,4FAAAC,CAAA,KAAAD,GAAAE,EAAA,sBAEPA,EAAA,8BAEAA,EAAA,4BAEAA,EAAA,qBAAAA,EAAA,6BAAAA,EAAA,wB,UAkFC,O,EAlFDF,G,EAAA,EAAAG,IAAA,OAAAC,MAKO,SAAKC,GACRC,KAAKC,YAAYF,GACjBC,KAAKE,eACLF,KAAKG,aACT,GAAC,CAAAN,IAAA,cAAAC,MAEO,SAAYC,GAChBC,KAAKI,OAASL,EAAQK,MAC1B,GAAC,CAAAP,IAAA,eAAAC,MAEO,WACJE,KAAKK,eAAiBL,KAAKI,OAAOE,cAAc,uBAChDN,KAAKO,aAAeP,KAAKK,eAAeC,cAAc,qBACtDN,KAAKQ,MAAQR,KAAKO,aAAaD,cAAc,mBAEzCN,KAAKQ,QACLR,KAAKS,cAAgBT,KAAKK,eAAeC,cAAc,kBACvDN,KAAKU,SAAWV,KAAKK,eAAeC,cAAc,uBAE1D,GAAC,CAAAT,IAAA,cAAAC,MAEO,WACAE,KAAKI,QACLJ,KAAKI,OAAOO,iBAAiB,QAASX,KAAKY,MAAMC,KAAKb,OAGtDA,KAAKQ,QACLR,KAAKQ,MAAMG,iBAAiB,QAASX,KAAKc,WAAWD,KAAKb,OAC1DA,KAAKU,SAASC,iBAAiB,QAASX,KAAKe,UAAUF,KAAKb,OAEpE,GAAC,CAAAH,IAAA,QAAAC,MAEO,SAAMkB,GACLA,EAAMZ,SAINY,EAAMZ,OAAuBa,QAAQ,qBACtCjB,KAAKI,OAAOc,UAAUC,OAAO3B,GAG5BQ,KAAKI,OAAOc,UAAUE,SAAS5B,IAChCQ,KAAKqB,qBAGTC,EAAAA,EAAAA,aAAmB,CAAC,YAAatB,KAAKuB,gBAAgBV,KAAKb,OAC/D,GAAC,CAAAH,IAAA,aAAAC,MAEO,SAAWkB,GACVA,EAAMZ,SAIXJ,KAAKO,aAAaW,UAAUM,IAAI/B,GAChCO,KAAKO,aAAaW,UAAUO,OAAOjC,GAEnCQ,KAAKS,cAAcS,UAAUM,IAAIhC,GACjCQ,KAAKS,cAAcS,UAAUO,OAAOhC,GACxC,GAAC,CAAAI,IAAA,qBAAAC,MAEO,WAAkB,IAAA4B,EAAA,KACtBC,YAAW,WACPD,EAAKjB,cAAcS,UAAUO,OAAOjC,GACpCkC,EAAKnB,aAAaW,UAAUO,OAAOhC,EACvC,GA7EM,IA8EV,GAAC,CAAAI,IAAA,YAAAC,MAEO,WACJE,KAAKO,aAAaW,UAAUO,OAAOhC,GACnCO,KAAKO,aAAaW,UAAUM,IAAIhC,GAEhCQ,KAAKS,cAAcS,UAAUO,OAAOjC,GACpCQ,KAAKS,cAAcS,UAAUM,IAAI/B,EACrC,GAAC,CAAAI,IAAA,kBAAAC,MAEO,WACJE,KAAKI,OAAOc,UAAUO,OAAOjC,EACjC,M,8EAACE,CAAA,CAxFM,GA2FX,W","sources":["webpack://multi-kelnik-2.0/./frontend/src/components/share/index.ts"],"sourcesContent":["import type {IShare, IShareOptions} from './types';\r\nimport {Utils} from '@/common/scripts/utils';\r\n\r\nconst CLASS_OPEN = 'is-open';\r\nconst CLASS_HIDDEN = 'is-hidden';\r\nconst DELAY = 300;\r\n\r\nclass Share implements IShare {\r\n    private target: HTMLElement;\r\n    // Общий контейнер\r\n    private shareContainer: HTMLElement;\r\n    // Блок с вариантами \"поделиться\"\r\n    private shareContent: HTMLElement;\r\n    // Вариант отправки по email\r\n    private email: HTMLElement;\r\n    private formContainer: HTMLElement;\r\n    private stepBack: HTMLElement;\r\n\r\n    public init(options: IShareOptions): void {\r\n        this._setOptions(options);\r\n        this._getElements();\r\n        this._bindEvents();\r\n    }\r\n\r\n    private _setOptions(options: IShareOptions): void {\r\n        this.target = options.target;\r\n    }\r\n\r\n    private _getElements(): void {\r\n        this.shareContainer = this.target.querySelector('.j-share__container') as HTMLElement;\r\n        this.shareContent = this.shareContainer.querySelector('.j-share__content') as HTMLElement;\r\n        this.email = this.shareContent.querySelector('.j-share__email') as HTMLElement;\r\n\r\n        if (this.email) {\r\n            this.formContainer = this.shareContainer.querySelector('.j-share__form') as HTMLElement;\r\n            this.stepBack = this.shareContainer.querySelector('.j-share__form-back') as HTMLElement;\r\n        }\r\n    }\r\n\r\n    private _bindEvents(): void {\r\n        if (this.target) {\r\n            this.target.addEventListener('click', this._open.bind(this));\r\n        }\r\n\r\n        if (this.email) {\r\n            this.email.addEventListener('click', this._emailForm.bind(this));\r\n            this.stepBack.addEventListener('click', this._stepBack.bind(this));\r\n        }\r\n    }\r\n\r\n    private _open(event: MouseEvent): void {\r\n        if (!event.target) {\r\n            return;\r\n        }\r\n\r\n        if ((event.target as HTMLElement).closest('.j-share__button')) {\r\n            this.target.classList.toggle(CLASS_OPEN);\r\n        }\r\n\r\n        if (!this.target.classList.contains(CLASS_OPEN)) {\r\n            this._setInitialContent();\r\n        }\r\n\r\n        Utils.clickOutside(['.j-share'], this._clickedOutside.bind(this));\r\n    }\r\n\r\n    private _emailForm(event: MouseEvent): void {\r\n        if (!event.target) {\r\n            return;\r\n        }\r\n\r\n        this.shareContent.classList.add(CLASS_HIDDEN);\r\n        this.shareContent.classList.remove(CLASS_OPEN);\r\n\r\n        this.formContainer.classList.add(CLASS_OPEN);\r\n        this.formContainer.classList.remove(CLASS_HIDDEN);\r\n    }\r\n\r\n    private _setInitialContent(): void {\r\n        setTimeout(() => {\r\n            this.formContainer.classList.remove(CLASS_OPEN);\r\n            this.shareContent.classList.remove(CLASS_HIDDEN);\r\n        }, DELAY);\r\n    }\r\n\r\n    private _stepBack(): void {\r\n        this.shareContent.classList.remove(CLASS_HIDDEN);\r\n        this.shareContent.classList.add(CLASS_OPEN);\r\n\r\n        this.formContainer.classList.remove(CLASS_OPEN);\r\n        this.formContainer.classList.add(CLASS_HIDDEN);\r\n    }\r\n\r\n    private _clickedOutside(): void {\r\n        this.target.classList.remove(CLASS_OPEN);\r\n    }\r\n}\r\n\r\nexport default Share;\r\n"],"names":["CLASS_OPEN","CLASS_HIDDEN","Share","_classCallCheck","_defineProperty","key","value","options","this","_setOptions","_getElements","_bindEvents","target","shareContainer","querySelector","shareContent","email","formContainer","stepBack","addEventListener","_open","bind","_emailForm","_stepBack","event","closest","classList","toggle","contains","_setInitialContent","Utils","_clickedOutside","add","remove","_this","setTimeout"],"sourceRoot":""}