"use strict";(self.webpackChunkmulti_kelnik_2_0=self.webpackChunkmulti_kelnik_2_0||[]).push([[19],{1783:function(t,e,i){i.r(e);var n=i(6163),r=i(281);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function l(t,e,i){return(e=h(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}var u=new n.Z,d="is-fixed",f="header_theme_transparent",g="header_theme_no-shadow",v="header_theme_fullscreen",y=document.documentElement,b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"header",void 0),l(this,"targetScroll",void 0),l(this,"currentTargetScrollVersion",""),l(this,"heightHeader",void 0),l(this,"scrollPosition",0),l(this,"sections",[]),l(this,"isOpenFilter",!1),l(this,"noShadowHeader",void 0),l(this,"section",s(document.querySelectorAll(".j-anchor-section"))),l(this,"scrollByStart",void 0),l(this,"prevScrollPosition",void 0)}var e,i,n;return e=t,(i=[{key:"init",value:function(t){this.header=t.headerWrap,this.targetScroll=t.targetScroll,this.heightHeader=this.header.offsetHeight,this.noShadowHeader=this.header.classList.contains("j-header-alternative"),this._initState(),this._subscribes(),this._bindEvents()}},{key:"_bindEvents",value:function(){var t=this;window.addEventListener("scroll",r.c.debounce((function(){t.isOpenFilter||(t._changeState(),t._changeStateAnchor())}),10)),window.addEventListener("resize",r.c.debounce((function(){t.isOpenFilter||(t._setHeight(),t._changeState(),t._changeStateAnchor())}),10))}},{key:"_subscribes",value:function(){var t=this;u.subscribe("navigation:ready",(function(){t._setHeight()})),u.subscribe("scrollBy:start",(function(){t.scrollByStart=!0})),u.subscribe("scrollBy:finish",(function(){t.scrollByStart=!1}))}},{key:"_initState",value:function(){this.noShadowHeader||this._changeState(),this._checkFullScreenNavigation(),this._setHeight()}},{key:"_checkFullScreenNavigation",value:function(){this.header.querySelector(".j-navigation-fullscreen__menu")&&!this.header.classList.contains(v)&&this.header.classList.add(v)}},{key:"_setHeight",value:function(){y.style.setProperty("--header-height","".concat(this.header.clientHeight,"px"))}},{key:"_changeState",value:function(){this.scrollPosition=window.scrollY,this._isScrollInTarget()?(this.header.classList.remove(d),"3"!==this.currentTargetScrollVersion&&this.header.classList.add(f)):(this.header.classList.add(d),this.header.classList.remove(f)),this.prevScrollPosition=this.scrollPosition,this.scrollPosition<100&&this.noShadowHeader?this.header.classList.add(g):this.header.classList.remove(g)}},{key:"_isScrollDown",value:function(){return this.scrollPosition>this.heightHeader&&this.scrollPosition-this.prevScrollPosition>1}},{key:"_isScrollInTarget",value:function(){var t,e=this;return!(null===(t=this.targetScroll)||void 0===t||!t.length)&&this.targetScroll.some((function(t){var i=t.getBoundingClientRect().top<=0&&t.getBoundingClientRect().top+t.getBoundingClientRect().height>=0;return i&&(e.currentTargetScrollVersion=t.dataset.version||""),i}))}},{key:"_changeStateAnchor",value:function(){var t=this;this.section.length&&this.section.forEach((function(e){var i=window.innerHeight/3,n=e.getBoundingClientRect().top+pageYOffset-i;t.scrollPosition>n&&(t.sections.includes(e)||t.sections.push(e)),t.scrollPosition<n&&t.sections.includes(e)&&t.sections.splice(t.sections.length-1,1);var r=!!t.sections.length&&"#".concat(t.sections[t.sections.length-1].id);!t.scrollByStart&&r&&u.publish("anchorChangeSection",r)}))}}])&&c(e.prototype,i),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.default=b}}]);
//# sourceMappingURL=header.b01579ff2c55e0cb.js.map