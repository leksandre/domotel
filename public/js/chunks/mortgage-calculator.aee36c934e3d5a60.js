"use strict";(self.webpackChunkmulti_kelnik_2_0=self.webpackChunkmulti_kelnik_2_0||[]).push([[998],{2228:function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});i(5449);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,o=void 0,o=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(o)?o:String(o)),r)}var a,o}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,(i=[{key:"isExist",value:function(e){return null!==e&&!isNaN(Number(e))&&void 0!==e}},{key:"saveToStorage",value:function(e,t){window.sessionStorage.setItem(e,t.toString())}},{key:"getAccessStorage",value:function(e){return Number(window.sessionStorage.getItem(e))}},{key:"removeStorage",value:function(e){window.sessionStorage.removeItem(e)}},{key:"calc",value:function(e,t,i){switch(e){case"creditAmount":return t-i;case"creditPercent":return parseInt((i/t*100).toFixed());default:return-1/0}}},{key:"calcString",value:function(e,t,i){switch(e){case"creditAmountPretty":return"".concat((t-i).toLocaleString("ru-Ru"),"&nbsp;₽");case"creditPercentPretty":return"".concat((i/t*100).toFixed(),"%");case"monthlyPaymentPretty":return"".concat(parseInt(t.toFixed()).toLocaleString("ru-Ru"),"&nbsp;₽/мес.");default:return"Неверный параметр action: ".concat(e)}}},{key:"calcCredit",value:function(){var e=this.getAccessStorage("price[min]"),t=this.getAccessStorage("first-pay[min]"),i=this.calcString("creditPercentPretty",e,t),n=this.calc("creditAmount",e,t)>=0?this.calcString("creditAmountPretty",e,t):"—";return this.saveToStorage("creditAmount",this.calc("creditAmount",e,t)),this.saveToStorage("creditPercent",this.calc("creditPercent",e,t)),{amount:n,percent:i}}},{key:"decodePostfix",value:function(e){return[1,21,31].includes(e)?"года":"лет"}},{key:"checkInputData",value:function(e,t,i){var n=Number(e.value.replace(i,""));t.from=n<t.min?t.min:n>t.max?t.max:n}},{key:"preventNaNSymbolsEnter",value:function(e){![8,9,13,17,18,35,36,37,39,46].includes(e.which)&&(e.which>57||e.which<48)&&(e.which>105||e.which<96)&&(e.which>123||e.which<112)&&e.preventDefault()}},{key:"onKeyDownEvent",value:function(e,t,i,n,r){switch(e.which){case 13:this.checkInputData(n,t,r),i.updateSlidersValues(t,"set"),i.update(),n.blur();break;case 27:n.blur()}}},{key:"getQueryData",value:function(){return!!window.location.search.length&&window.location.search.replace("?","").split("&").reduce((function(e,t){var i=t.split("=");return e[decodeURIComponent(String(i[0]))]=decodeURIComponent(String(i[1])),e}),{})}}])&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o=i(6163),s=function(e){var t=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,a=0,o=0,s=null,l=null,_=!1,u=!1,m=!1,p=!0,f=!1,d=!1,c=!0,h=!1,v=!1,g=!1,y=!1,b="base",x={win:window,body:document.body,input:t,cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},w={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},k={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0},S={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" — ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};"INPUT"!==t.nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",t);var L={skin:t.dataset.skin,type:t.dataset.type,min:t.dataset.min,max:t.dataset.max,from:t.dataset.from,to:t.dataset.to,step:t.dataset.step,min_interval:t.dataset.minInterval,max_interval:t.dataset.maxInterval,drag_interval:t.dataset.dragInterval,values:t.dataset.values,from_fixed:t.dataset.fromFixed,from_min:t.dataset.fromMin,from_max:t.dataset.fromMax,from_shadow:t.dataset.fromShadow,to_fixed:t.dataset.toFixed,to_min:t.dataset.toMin,to_max:t.dataset.toMax,to_shadow:t.dataset.toShadow,prettify_enabled:t.dataset.prettifyEnabled,prettify_separator:t.dataset.prettifySeparator,force_edges:t.dataset.forceEdges,keyboard:t.dataset.keyboard,grid:t.dataset.grid,grid_margin:t.dataset.gridMargin,grid_num:t.dataset.gridNum,grid_snap:t.dataset.gridSnap,hide_min_max:t.dataset.hideMinMax,hide_from_to:t.dataset.hideFromTo,prefix:t.dataset.prefix,postfix:t.dataset.postfix,max_postfix:t.dataset.maxPostfix,decorate_both:t.dataset.decorateBoth,values_separator:t.dataset.valuesSeparator,input_values_separator:t.dataset.inputValuesSeparator,disable:t.dataset.disable,block:t.dataset.block,extra_classes:t.dataset.extraClasses};for(var P in L.values=L.values&&L.values.split(","),L)L.hasOwnProperty(P)&&(void 0!==L[P]&&""!==L[P]||delete L[P]);var E=t.value;void 0!==E&&""!==E&&((E=E.split(L.input_values_separator||i.input_values_separator||";"))[0]&&E[0]==+E[0]&&(E[0]=+E[0]),E[1]&&E[1]==+E[1]&&(E[1]=+E[1]),i&&i.values&&i.values.length?(S.from=E[0]&&i.values.indexOf(E[0]),S.to=E[1]&&i.values.indexOf(E[1])):(S.from=E[0]&&+E[0],S.to=E[1]&&+E[1])),Object.assign(S,i),Object.assign(S,L),i=S;var N={},I={input:x.input,slider:null,min:i.min,max:i.max,from:i.from,from_percent:0,from_value:null,to:i.to,to_percent:0,to_value:null},M=function(e){m=!1,w.p_step=pe(i.step,!0),b="base",me(),A(),V(),e?(u=!0,Q(!0),ue()):(u=!0,Q(!0),se()),ie()},A=function(){var e='<span class="irs irs--'+i.skin+" "+i.extra_classes+'"></span>';x.input.insertAdjacentHTML("beforebegin",e),x.input.setAttribute("readonly","true"),x.cont=x.input.previousElementSibling,I.slider=x.cont,x.cont.innerHTML='<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid">1</span>',x.rs=x.cont.querySelector(".irs"),x.min=x.cont.querySelector(".irs-min"),x.max=x.cont.querySelector(".irs-max"),x.from=x.cont.querySelector(".irs-from"),x.to=x.cont.querySelector(".irs-to"),x.single=x.cont.querySelector(".irs-single"),x.line=x.cont.querySelector(".irs-line"),x.grid=x.cont.querySelector(".irs-grid"),"single"===i.type?(x.cont.insertAdjacentHTML("beforeend",'<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>'),x.bar=x.cont.querySelector(".irs-bar"),x.edge=x.cont.querySelector(".irs-bar--single"),x.s_single=x.cont.querySelector(".single"),x.from.style.visibility="hidden",x.to.style.visibility="hidden",x.shad_single=x.cont.querySelector(".shadow-single")):(x.cont.insertAdjacentHTML("beforeend",'<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>'),x.bar=x.cont.querySelector(".irs-bar"),x.s_from=x.cont.querySelector(".from"),x.s_to=x.cont.querySelector(".to"),x.shad_from=x.cont.querySelector(".shadow-from"),x.shad_to=x.cont.querySelector(".shadow-to"),F()),i.hide_from_to&&(x.from.style.display="none",x.to.style.display="none",x.single.style.display="none"),Le(),i.disable?(T(),x.input.disabled=!0):(x.input.disabled=!1,j(),O()),i.disable||(i.block?T():j()),i.drag_interval&&(x.bar.style.cursor="ew-resize")},F=function(){var e=i.min,t=i.max,n=i.from,r=i.to;n>e&&r===t?x.s_from.classList.add("type_last"):r<t&&x.s_to.classList.add("type_last")},T=function(){x.cont.insertAdjacentHTML("beforeend",'<span class="irs-disable-mask"></span>'),x.cont.classList.add("irs-disabled")},j=function(){x.cont.classList.remove(".irs-disable-mask"),x.cont.classList.remove("irs-disabled")},q=function(){x.cont.remove(),x.cont=null,x.win.removeEventListener("keydown",U.bind(this,"keyboard")),x.body.removeEventListener("touchmove",D.bind(this)),x.body.removeEventListener("mousemove",D.bind(this)),x.win.removeEventListener("touchend",R.bind(this)),x.win.removeEventListener("mouseup",R.bind(this)),x.grid_labels=[],w.big=[],w.big_w=[],w.big_p=[],w.big_x=[],cancelAnimationFrame(l)},O=function(){m||(x.body.addEventListener("touchmove",D.bind(this)),x.body.addEventListener("mousemove",D.bind(this)),x.win.addEventListener("touchend",R.bind(this)),x.win.addEventListener("mouseup",R.bind(this)),x.line.addEventListener("touchstart",W.bind(this,"click"),{passive:!0}),x.line.addEventListener("mousedown",W.bind(this,"click")),x.line.addEventListener("focus",C.bind(this)),i.drag_interval&&"double"===i.type?(x.bar.addEventListener("touchstart",H.bind(this,"both"),{passive:!0}),x.bar.addEventListener("mousedown",H.bind(this,"both"))):(x.bar.addEventListener("touchstart",W.bind(this,"click"),{passive:!0}),x.bar.addEventListener("mousedown",W.bind(this,"click"))),"single"===i.type?(x.single.addEventListener("touchstart",H.bind(this,"single"),{passive:!0}),x.s_single.addEventListener("touchstart",H.bind(this,"single"),{passive:!0}),x.shad_single.addEventListener("touchstart",W.bind(this,"click"),{passive:!0}),x.single.addEventListener("mousedown",H.bind(this,"single")),x.s_single.addEventListener("mousedown",H.bind(this,"single")),x.edge.addEventListener("mousedown",W.bind(this,"click")),x.shad_single.addEventListener("touchstart",W.bind(this,"click"),{passive:!0})):(x.single.addEventListener("touchstart",H.bind(this,null),{passive:!0}),x.single.addEventListener("mousedown",H.bind(this,null)),x.from.addEventListener("touchstart",H.bind(this,"from"),{passive:!0}),x.s_from.addEventListener("touchstart",H.bind(this,"from"),{passive:!0}),x.to.addEventListener("touchstart",H.bind(this,"to"),{passive:!0}),x.s_to.addEventListener("touchstart",H.bind(this,"to"),{passive:!0}),x.shad_from.addEventListener("touchstart",W.bind(this,"click"),{passive:!0}),x.shad_to.addEventListener("touchstart",W.bind(this,"click"),{passive:!0}),x.from.addEventListener("mousedown",H.bind(this,"from")),x.s_from.addEventListener("mousedown",H.bind(this,"from")),x.to.addEventListener("mousedown",H.bind(this,"to")),x.s_to.addEventListener("mousedown",H.bind(this,"to")),x.shad_from.addEventListener("mousedown",W.bind(this,"click")),x.shad_to.addEventListener("mousedown",W.bind(this,"click"))),i.keyboard&&x.line.addEventListener("keydown",U.bind(this,"keyboard")))},C=function(e){var t,n;b?x.line.focus():(t=(n="single"===i.type?x.single:x.from).getBoundingClientRect().left,t+=n.getBoundingClientRect().width/2-1,W("single",{preventDefault:function(){},pageX:t}))},D=function(e){var t;if(_){var i=e.pageX||(null==e||null===(t=e.touches[0])||void 0===t?void 0:t.pageX);w.x_pointer=i-w.x_gap,Q()}},R=function(e){if(v){v=!1;var t=x.cont.querySelector(".state_hover");t&&t.classList.remove("state_hover"),u=!0,ie(),K(),(x.cont.contains(e.target)||_)&&_e(),_=!1}},H=function(e,t){"touchstart"!==t.type&&t.preventDefault();var i=t.pageX||(null==t?void 0:t.touches[0].pageX);2!==t.button&&("both"===e&&X(),e||(e=b||"from"),b=e,v=!0,_=!0,w.x_gap=x.rs.getBoundingClientRect().left,w.x_pointer=i-w.x_gap,G(),function(e){switch(e){case"single":w.p_gap=ge(w.p_pointer-w.p_single_fake),x.s_single.classList.add("state_hover");break;case"from":w.p_gap=ge(w.p_pointer-w.p_from_fake),x.s_from.classList.add("state_hover","type_last"),x.s_to.classList.remove("type_last");break;case"to":w.p_gap=ge(w.p_pointer-w.p_to_fake),x.s_to.classList.add("state_hover","type_last"),x.s_from.classList.remove("type_last");break;case"both":w.p_gap_left=ge(w.p_pointer-w.p_from_fake),w.p_gap_right=ge(w.p_to_fake-w.p_pointer),x.s_to.classList.remove("type_last"),x.s_from.classList.remove("type_last")}}(e),x.line.dispatchEvent(new Event("focus")),ie())},W=function(e,t){t.preventDefault();var i=t.pageX||(null==t?void 0:t.touches[0].pageX);2!==t.button&&(b=e,y=!0,w.x_gap=x.rs.getBoundingClientRect().left,w.x_pointer=+(i-w.x_gap).toFixed(),u=!0,Q(),x.line.dispatchEvent(new Event("focus")))},U=function(e,t){if(!(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey))switch(t.which){case 83:case 65:case 40:case 37:t.preventDefault(),B(!1);break;case 87:case 68:case 38:case 39:t.preventDefault(),B(!0)}},B=function(e){var t=w.p_pointer,n=i.step/((i.max-i.min)/100);e?t+=n:t-=n,w.x_pointer=ge(w.w_rs/100*t),f=!0,Q()},V=function(){if(i){if(i.hide_min_max)return x.min.style.display="none",void(x.max.style.display="none");if(i.values.length)x.min.innerHTML=ke(i.p_values[i.min]),x.max.innerHTML=ke(i.p_values[i.max]);else{var e=ye(i.min),t=ye(i.max);I.min_pretty=e,I.max_pretty=t,x.min.innerHTML=ke(e,i.min),x.max.innerHTML=ke(t,i.max)}k.w_min=x.min.offsetWidth,k.w_max=x.max.offsetWidth}},X=function(){var e=I.to-I.from;null===s&&(s=i.min_interval),i.min_interval=e},K=function(){null!==s&&(i.min_interval=s,s=null)},Q=function(e){if(i&&((10===++n||e)&&(n=0,w.w_rs=x.rs.offsetWidth,Y()),w.w_rs)){G();var t=z();switch("both"===b&&(w.p_gap=0,t=z()),"click"===b&&(w.p_gap=w.p_handle/2,t=z(),b=i.drag_interval?"both_one":J(t)),b){case"base":var r=(i.max-i.min)/100,a=(I.from-i.min)/r,o=(I.to-i.min)/r;w.p_single_real=ge(a),w.p_from_real=ge(a),w.p_to_real=ge(o),w.p_single_real=ve(w.p_single_real,i.from_min,i.from_max),w.p_from_real=ve(w.p_from_real,i.from_min,i.from_max),w.p_to_real=ve(w.p_to_real,i.to_min,i.to_max),w.p_single_fake=$(w.p_single_real),w.p_from_fake=$(w.p_from_real),w.p_to_fake=$(w.p_to_real),b=null;break;case"single":if(i.from_fixed)break;w.p_single_real=Z(t),w.p_single_real=de(w.p_single_real),w.p_single_real=ve(w.p_single_real,i.from_min,i.from_max),w.p_single_fake=$(w.p_single_real);break;case"from":if(i.from_fixed)break;w.p_from_real=Z(t),w.p_from_real=de(w.p_from_real),w.p_from_real>w.p_to_real&&(w.p_from_real=w.p_to_real),w.p_from_real=ve(w.p_from_real,i.from_min,i.from_max),w.p_from_real=ce(w.p_from_real,w.p_to_real,"from"),w.p_from_real=he(w.p_from_real,w.p_to_real,"from"),w.p_from_fake=$(w.p_from_real);break;case"to":if(i.to_fixed)break;w.p_to_real=Z(t),w.p_to_real=de(w.p_to_real),w.p_to_real<w.p_from_real&&(w.p_to_real=w.p_from_real),w.p_to_real=ve(w.p_to_real,i.to_min,i.to_max),w.p_to_real=ce(w.p_to_real,w.p_from_real,"to"),w.p_to_real=he(w.p_to_real,w.p_from_real,"to"),w.p_to_fake=$(w.p_to_real);break;case"both":if(i.from_fixed||i.to_fixed)break;t=ge(t+.001*w.p_handle),w.p_from_real=Z(t)-w.p_gap_left,w.p_from_real=de(w.p_from_real),w.p_from_real=ve(w.p_from_real,i.from_min,i.from_max),w.p_from_real=ce(w.p_from_real,w.p_to_real,"from"),w.p_from_fake=$(w.p_from_real),w.p_to_real=Z(t)+w.p_gap_right,w.p_to_real=de(w.p_to_real),w.p_to_real=ve(w.p_to_real,i.to_min,i.to_max),w.p_to_real=ce(w.p_to_real,w.p_from_real,"to"),w.p_to_fake=$(w.p_to_real);break;case"both_one":if(i.from_fixed||i.to_fixed)break;var s=Z(t),l=I.from_percent,_=I.to_percent-l,u=_/2,m=s-u,p=s+u;m<0&&(p=(m=0)+_),p>100&&(m=(p=100)-_),w.p_from_real=de(m),w.p_from_real=ve(w.p_from_real,i.from_min,i.from_max),w.p_from_fake=$(w.p_from_real),w.p_to_real=de(p),w.p_to_real=ve(w.p_to_real,i.to_min,i.to_max),w.p_to_fake=$(w.p_to_real)}"single"===i.type?(w.p_bar_x=w.p_handle/2,w.p_bar_w=w.p_single_fake,I.from_percent=w.p_single_real,I.from=fe(w.p_single_real),I.from_pretty=ye(I.from),i.values.length&&(I.from_value=i.values[I.from])):(w.p_bar_x=ge(w.p_from_fake+w.p_handle/2),w.p_bar_w=ge(w.p_to_fake-w.p_from_fake),I.from_percent=w.p_from_real,I.from=fe(w.p_from_real),I.from_pretty=ye(I.from),I.to_percent=w.p_to_real,I.to=fe(w.p_to_real),I.to_pretty=ye(I.to),i.values.length&&(I.from_value=i.values[I.from],I.to_value=i.values[I.to])),ee(),te()}},G=function(){w.w_rs?(w.x_pointer<0||isNaN(w.x_pointer)?w.x_pointer=0:w.x_pointer>w.w_rs&&(w.x_pointer=w.w_rs),w.p_pointer=ge(w.x_pointer/w.w_rs*100)):w.p_pointer=0},Z=function(e){return e/(100-w.p_handle)*100},$=function(e){return e/100*(100-w.p_handle)},z=function(){var e=100-w.p_handle,t=ge(w.p_pointer-w.p_gap);return t<0?t=0:t>e&&(t=e),t},Y=function(){"single"===i.type?w.w_handle=x.s_single.offsetWidth:w.w_handle=x.s_from.offsetWidth,w.p_handle=ge(w.w_handle/w.w_rs*100)},J=function(e){return"single"===i.type?"single":e>=w.p_from_real+(w.p_to_real-w.p_from_real)/2?i.to_fixed?"from":"to":i.from_fixed?"to":"from"},ee=function(){w.w_rs&&(k.p_min=k.w_min/w.w_rs*100,k.p_max=k.w_max/w.w_rs*100)},te=function(){w.w_rs&&!i.hide_from_to&&("single"===i.type?(k.w_single=x.single.offsetWidth,k.p_single_fake=k.w_single/w.w_rs*100,k.p_single_left=w.p_single_fake+w.p_handle/2-k.p_single_fake/2,k.p_single_left=xe(k.p_single_left,k.p_single_fake)):(k.w_from=x.from.offsetWidth,k.p_from_fake=k.w_from/w.w_rs*100,k.p_from_left=w.p_from_fake+w.p_handle/2-k.p_from_fake/2,k.p_from_left=ge(k.p_from_left),k.p_from_left=xe(k.p_from_left,k.p_from_fake),k.w_to=x.to.offsetWidth,k.p_to_fake=k.w_to/w.w_rs*100,k.p_to_left=w.p_to_fake+w.p_handle/2-k.p_to_fake/2,k.p_to_left=ge(k.p_to_left),k.p_to_left=xe(k.p_to_left,k.p_to_fake),k.w_single=x.single.offsetWidth,k.p_single_fake=k.w_single/w.w_rs*100,k.p_single_left=(k.p_from_left+k.p_to_left+k.p_to_fake)/2-k.p_single_fake/2,k.p_single_left=ge(k.p_single_left),k.p_single_left=xe(k.p_single_left,k.p_single_fake)))},ie=function e(){l&&(cancelAnimationFrame(l),l=null),clearTimeout(r),r=null,i&&(ne(),v?l=requestAnimationFrame(e):r=setTimeout(e,300))},ne=function(){w.w_rs=x.rs.offsetWidth,w.w_rs&&(w.w_rs!==w.w_rs_old&&(b="base",g=!0),(w.w_rs!==w.w_rs_old||u)&&(V(),Q(!0),re(),i.grid&&(Ie(),Ee()),u=!0,w.w_rs_old=w.w_rs,ae()),w.w_rs&&(_||u||f)&&((a!==I.from||o!==I.to||u||f)&&(re(),x.bar.style.left=w.p_bar_x+"%",x.bar.style.width=w.p_bar_w+"%","single"===i.type?(x.bar.style.left="0",x.bar.style.width=w.p_bar_w+w.p_bar_x+"%",x.s_single.style.left=w.p_single_fake+"%",x.single.style.left=k.p_single_left+"%"):(x.s_from.style.left=w.p_from_fake+"%",x.s_to.style.left=w.p_to_fake+"%",(a!==I.from||u)&&(x.from.style.left=k.p_from_left+"%"),(o!==I.to||u)&&(x.to.style.left=k.p_to_left+"%"),x.single.style.left=k.p_single_left+"%"),oe(),a===I.from&&o===I.to||c||(x.input.dispatchEvent(new Event("change")),x.input.dispatchEvent(new Event("input"))),a=I.from,o=I.to,g||d||c||h||le(),(f||y)&&(f=!1,y=!1,_e()),d=!1,g=!1,h=!1),c=!1,f=!1,y=!1,u=!1))},re=function(){if(i){var e,t,n,r,a,o=i.values.length,s=i.p_values;if(!i.hide_from_to)if("single"===i.type)o?(e=ke(s[I.from]),x.single.innerHTML=e):(r=ye(I.from),e=ke(r,I.from),x.single.innerHTML=e),te(),k.p_single_left<k.p_min+1?x.min.style.visibility="hidden":x.min.style.visibility="visible",k.p_single_left+k.p_single_fake>100-k.p_max-1?x.max.style.visibility="hidden":x.max.style.visibility="visible";else{o?(i.decorate_both?(e=ke(s[I.from]),e+=i.values_separator,e+=ke(s[I.to])):e=ke(s[I.from]+i.values_separator+s[I.to]),t=ke(s[I.from]),n=ke(s[I.to]),x.single.innerHTML=e,x.from.innerHTML=t,x.to.innerHTML=n):(r=ye(I.from),a=ye(I.to),i.decorate_both?(e=ke(r,I.from),e+=i.values_separator,e+=ke(a,I.to)):e=ke(r+i.values_separator+a,I.to),t=ke(r,I.from),n=ke(a,I.to),x.single.innerHTML=e,x.from.innerHTML=t,x.to.innerHTML=n),te();var l=Math.min(k.p_single_left,k.p_from_left),_=k.p_single_left+k.p_single_fake,u=k.p_to_left+k.p_to_fake,m=Math.max(_,u);k.p_from_left+k.p_from_fake>=k.p_to_left?(x.from.style.visibility="hidden",x.to.style.visibility="hidden",x.single.style.visibility="visible",I.from===I.to?("from"===b?x.from.style.visibility="visible":"to"===b?x.to.style.visibility="visible":b||(x.from.style.visibility="visible"),x.single.style.visibility="hidden",m=u):(x.from.style.visibility="hidden",x.to.style.visibility="hidden",x.single.style.visibility="visible",m=Math.max(_,u))):(x.from.style.visibility="visible",x.to.style.visibility="visible",x.single.style.visibility="hidden"),l<k.p_min+1?x.min.style.visibility="hidden":x.min.style.visibility="visible",m>100-k.p_max-1?x.max.style.visibility="hidden":x.max.style.visibility="visible"}}},ae=function(){var e,t,n,r,a=i,o=x,s="number"==typeof a.from_min&&!isNaN(a.from_min),l="number"==typeof a.from_max&&!isNaN(a.from_max),_="number"==typeof a.to_min&&!isNaN(a.to_min),u="number"==typeof a.to_max&&!isNaN(a.to_max);"single"===a.type?a.from_shadow&&(s||l)?(e=pe(s?a.from_min:a.min),t=pe(l?a.from_max:a.max)-e,e=ge(e-w.p_handle/100*e),t=ge(t-w.p_handle/100*t),e+=w.p_handle/2,o.shad_single.style.display="block",o.shad_single.style.left=e+"%",o.shad_single.style.width=t+"%"):o.shad_single.style.display="none":(a.from_shadow&&(s||l)?(e=pe(s?a.from_min:a.min),t=pe(l?a.from_max:a.max)-e,e=ge(e-w.p_handle/100*e),t=ge(t-w.p_handle/100*t),e+=w.p_handle/2,o.shad_from.style.display="block",o.shad_from.style.left=e+"%",o.shad_from.style.width=t+"%"):o.shad_from.style.display="none",a.to_shadow&&(_||u)?(n=pe(_?a.to_min:a.min),r=pe(u?a.to_max:a.max)-n,n=ge(n-w.p_handle/100*n),r=ge(r-w.p_handle/100*r),n+=w.p_handle/2,o.shad_to.style.display="block",o.shad_to.style.left=n+"%",o.shad_to.style.width=r+"%"):o.shad_to.style.display="none")},oe=function(){"single"===i.type?(i.values.length?x.input.setAttribute("value",I.from_value):x.input.setAttribute("value",I.from),x.input.dataset.from=I.from):(i.values.length?x.input.setAttribute("value",I.from_value+i.input_values_separator+I.to_value):x.input.setAttribute("value",I.from+i.input_values_separator+I.to),x.input.dataset.from=I.from,x.input.dataset.to=I.to)},se=function(){oe(),i.onStart&&"function"==typeof i.onStart&&(i.scope?i.onStart.call(i.scope,I):i.onStart(I))},le=function(){oe(),i.onChange&&"function"==typeof i.onChange&&(i.scope?i.onChange.call(i.scope,I):i.onChange(I))},_e=function(){oe(),i.onFinish&&"function"==typeof i.onFinish&&(i.scope?i.onFinish.call(i.scope,I):i.onFinish(I))},ue=function(){oe(),i.onUpdate&&"function"==typeof i.onUpdate&&(i.scope?i.onUpdate.call(i.scope,I):i.onUpdate(I))},me=function(){x.input.classList.toggle("irs-hidden-input"),p?x.input.setAttribute("tabindex","-1"):x.input.removeAttribute("tabindex"),p=!p},pe=function(e,t){var n,r=i.max-i.min,a=r/100;return r?(n=t?e:e-i.min,ge(n/a)):(m=!0,0)},fe=function(e){var t,n,r=i.min,a=i.max,o=r.toString().split(".")[1],s=a.toString().split(".")[1],l=0,_=0;if(0===e)return i.min;if(100===e)return i.max;o&&(l=t=o.length),s&&(l=n=s.length),t&&n&&(l=t>=n?t:n),r<0&&(r=+(r+(_=Math.abs(r))).toFixed(l),a=+(a+_).toFixed(l));var u,m=(a-r)/100*e+r,p=i.step.toString().split(".")[1];return p?m=+m.toFixed(p.length):(m/=i.step,m=+(m*=i.step).toFixed(0)),_&&(m-=_),(u=p?+m.toFixed(p.length):ge(m))<i.min?u=i.min:u>i.max&&(u=i.max),u},de=function(e){var t=Math.round(e/w.p_step)*w.p_step;return t>100&&(t=100),100===e&&(t=100),ge(t)},ce=function(e,t,n){var r,a,o=i;return o.min_interval?(r=fe(e),a=fe(t),"from"===n?a-r<o.min_interval&&(r=a-o.min_interval):r-a<o.min_interval&&(r=a+o.min_interval),pe(r)):e},he=function(e,t,n){var r,a,o=i;return o.max_interval?(r=fe(e),a=fe(t),"from"===n?a-r>o.max_interval&&(r=a-o.max_interval):r-a>o.max_interval&&(r=a+o.max_interval),pe(r)):e},ve=function(e,t,n){var r=fe(e);return"number"!=typeof t&&(t=i.min),"number"!=typeof n&&(n=i.max),r<t&&(r=t),r>n&&(r=n),pe(r)},ge=function(e){return+(e=e.toFixed(20))},ye=function(e){return i.prettify_enabled?i.prettify&&"function"==typeof i.prettify?i.prettify(e):be(e):e},be=function(e){return e.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+i.prettify_separator)},xe=function(e,t){return i.force_edges?(e<0?e=0:e>100-t&&(e=100-t),ge(e)):ge(e)},we=function(){var e,t,n=i,r=I,a=n.values,o=a.length;if("string"==typeof n.min&&(n.min=+n.min),"string"==typeof n.max&&(n.max=+n.max),"string"==typeof n.from&&(n.from=+n.from),"string"==typeof n.to&&(n.to=+n.to),"string"==typeof n.step&&(n.step=+n.step),"string"==typeof n.from_min&&(n.from_min=+n.from_min),"string"==typeof n.from_max&&(n.from_max=+n.from_max),"string"==typeof n.to_min&&(n.to_min=+n.to_min),"string"==typeof n.to_max&&(n.to_max=+n.to_max),"string"==typeof n.grid_num&&(n.grid_num=+n.grid_num),n.max<n.min&&(n.max=n.min),o)for(n.p_values=[],n.min=0,n.max=o-1,n.step=1,n.grid_num=n.max,n.grid_snap=!0,t=0;t<o;t++)e=+a[t],isNaN(e)?e=a[t]:(a[t]=e,e=ye(e)),n.p_values.push(e);("number"!=typeof n.from||isNaN(n.from))&&(n.from=n.min),("number"!=typeof n.to||isNaN(n.to))&&(n.to=n.max),"single"===n.type?(n.from<n.min&&(n.from=n.min),n.from>n.max&&(n.from=n.max)):(n.from<n.min&&(n.from=n.min),n.from>n.max&&(n.from=n.max),n.to<n.min&&(n.to=n.min),n.to>n.max&&(n.to=n.max),N.from&&(N.from!==n.from&&n.from>n.to&&(n.from=n.to),N.to!==n.to&&n.to<n.from&&(n.to=n.from)),n.from>n.to&&(n.from=n.to),n.to<n.from&&(n.to=n.from)),("number"!=typeof n.step||isNaN(n.step)||!n.step||n.step<0)&&(n.step=1),"number"==typeof n.from_min&&n.from<n.from_min&&(n.from=n.from_min),"number"==typeof n.from_max&&n.from>n.from_max&&(n.from=n.from_max),"number"==typeof n.to_min&&n.to<n.to_min&&(n.to=n.to_min),"number"==typeof n.to_max&&n.from>n.to_max&&(n.to=n.to_max),r&&(r.min!==n.min&&(r.min=n.min),r.max!==n.max&&(r.max=n.max),(r.from<r.min||r.from>r.max)&&(r.from=n.from),(r.to<r.min||r.to>r.max)&&(r.to=n.to)),("number"!=typeof n.min_interval||isNaN(n.min_interval)||!n.min_interval||n.min_interval<0)&&(n.min_interval=0),("number"!=typeof n.max_interval||isNaN(n.max_interval)||!n.max_interval||n.max_interval<0)&&(n.max_interval=0),n.min_interval&&n.min_interval>n.max-n.min&&(n.min_interval=n.max-n.min),n.max_interval&&n.max_interval>n.max-n.min&&(n.max_interval=n.max-n.min)},ke=function(e,t){var n="",r=i;return r.prefix&&(n+=r.prefix),n+=e,r.max_postfix&&(r.values.length&&e===r.p_values[r.max]||t===r.max)&&(n+=r.max_postfix,r.postfix&&(n+=" ")),r.postfix&&(n+=r.postfix),n},Se=function(){I.min=i.min,I.max=i.max,I.from=i.from,I.from_percent=pe(I.from),I.from_pretty=ye(I.from),i.values&&(I.from_value=i.values[I.from]),I.to=i.to,I.to_percent=pe(I.to),I.to_pretty=ye(I.to),i.values&&(I.to_value=i.values[I.to])},Le=function(){if(i.grid){var e,t,n,r,a,o,s=i,l=s.max-s.min,_=s.grid_num,u=0,m=4,p="";for(Ie(),s.grid_snap&&(_=l/s.step),_>50&&(_=50),n=ge(100/_),_>4&&(m=3),_>7&&(m=2),_>14&&(m=1),_>28&&(m=0),e=0;e<_+1;e++){for(r=m,(u=ge(n*e))>100&&(u=100),w.big[e]=u,a=(u-n*(e-1))/(r+1),t=1;t<=r&&0!==u;t++)p+='<span class="irs-grid-pol small" style="left: '+ge(u-a*t)+'%"></span>';p+='<span class="irs-grid-pol" style="left: '+u+'%"></span>',o=fe(u),p+='<span class="irs-grid-text js-grid-text-'+e+'" style="left: '+u+'%">'+(o=s.values.length?s.p_values[o]:ye(o))+"</span>"}w.big_num=Math.ceil(_+1),x.cont.classList.add("irs-with-grid"),x.grid.innerHTML=p,Pe()}},Pe=function(){for(var e=0;e<w.big_num;e++)x.grid_labels.push(x.grid.querySelector(".js-grid-text-"+e));Ee()},Ee=function(){for(var e=[],t=[],n=w.big_num,r=0;r<n;r++)w.big_w[r]=x.grid_labels[r].offsetWidth,w.big_p[r]=ge(w.big_w[r]/w.w_rs*100),w.big_x[r]=ge(w.big_p[r]/2),e[r]=ge(w.big[r]-w.big_x[r]),t[r]=ge(e[r]+w.big_p[r]);i.force_edges&&(e[0]<-w.grid_gap&&(e[0]=-w.grid_gap,t[0]=ge(e[0]+w.big_p[0]),w.big_x[0]=w.grid_gap),t[n-1]>100+w.grid_gap&&(t[n-1]=100+w.grid_gap,e[n-1]=ge(t[n-1]-w.big_p[n-1]),w.big_x[n-1]=ge(w.big_p[n-1]-w.grid_gap))),Ne(2,e,t),Ne(4,e,t);for(var a=0;a<n;a++){var o=x.grid_labels[a];w.big_x[a]!==Number.POSITIVE_INFINITY&&(o.style.marginLeft=-w.big_x[a]+"%")}},Ne=function(e,t,i){for(var n=w.big_num,r=0;r<n;r+=e){var a=r+e/2;if(a>=n)break;var o=x.grid_labels[a];i[r]<=t[a]?o.style.visibility="visible":o.style.visibility="hidden"}},Ie=function(){i.grid_margin&&(w.w_rs=x.rs.offsetWidth,w.w_rs&&("single"===i.type?w.w_handle=x.s_single.offsetWidth:w.w_handle=x.s_from.offsetWidth,w.p_handle=ge(w.w_handle/w.w_rs*100),w.grid_gap=ge(w.p_handle/2-.1),x.grid.style.width=ge(100-w.p_handle)+"%",x.grid.style.left=w.grid_gap+"%"))},Me=function(e){t&&(d=!0,i.from=I.from,i.to=I.to,N.from=I.from,N.to=I.to,i=Object.assign(i,e),we(),Se(),me(),q(),M(!0))};return{update:function(e){Me(e)},reset:function(){t&&(Se(),Me())},destroy:function(){t&&(me(),t.removeAttribute("readonly"),q(),t=null,i=null)},init:function(){return we(),M(),this},options:i,old_from:a}};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e&&(e=document.querySelector(e)),new s(e,t).init()}var _=i(281);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function p(e,t,i){return(t=f(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var d=new o.Z,c=function(){function e(t){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"wrapper",void 0),p(this,"slider",void 0),p(this,"input",void 0),p(this,"oldFrom",0),p(this,"ionRangeSliderInstance",void 0),p(this,"options",void 0),p(this,"outerOptions",void 0),this.wrapper=t.wrapper,this.slider=this.wrapper.querySelector(".j-range-slider__base"),this.input=this.wrapper.querySelector(".j-range-slider__input"),this.outerOptions=null!==(i=t.outerOptions)&&void 0!==i?i:this.slider.dataset}var t,i,n;return t=e,i=[{key:"init",value:function(){this._setOptions(),this._initRangeSlider(),this._subscribes(),this._bindEvents(),this._initDigit()}},{key:"_setOptions",value:function(){var e,t,i,n,r,a,o,s,l,_,u=this;this.options={type:(null===(e=this.outerOptions)||void 0===e?void 0:e.type)||null,min:Number(null===(t=this.outerOptions)||void 0===t?void 0:t.min)||0,max:Number(null===(i=this.outerOptions)||void 0===i?void 0:i.max)||0,from:Number(null===(n=this.outerOptions)||void 0===n?void 0:n.from)||0,to:Number(null===(r=this.outerOptions)||void 0===r?void 0:r.to)||0,step:Number(null===(a=this.outerOptions)||void 0===a?void 0:a.step)||null,min_interval:Number(null===(o=this.outerOptions)||void 0===o?void 0:o.step)||null,digit:Boolean(null===(s=this.outerOptions)||void 0===s?void 0:s.digit)||!1,disable:Boolean(null===(l=this.outerOptions)||void 0===l?void 0:l.disable)||!1,validate:null===(_=this.outerOptions)||void 0===_?void 0:_.validate,hide_from_to:!0,hide_min_max:!0,prettify_enabled:!0,onStart:function(e){d.publish("rangeSlider:start",e,u)},onChange:function(e){u._updateInputs(e),d.publish("rangeSlider:change",e)},onFinish:function(e){d.publish("rangeSlider:finish",e)},onUpdate:function(e){u._updateInputs(e),d.publish("rangeSlider:change",e)}}}},{key:"_initRangeSlider",value:function(){this.slider&&(this.ionRangeSliderInstance=new l(this.slider,this.options),this.ionRangeSliderInstance.update({max:this.outerOptions.max,from:this.outerOptions.from,to:this.outerOptions.to}))}},{key:"_subscribes",value:function(){var e=this;d.subscribe("ionRangeSlider:reset",(function(){e.ionRangeSliderInstance.reset()}))}},{key:"_bindEvents",value:function(){var e=this;this.input&&(this.input.addEventListener("change",(function(){e._onInputFromChange()})),this.input.addEventListener("input",(function(t){var i=t.target,n=i.value;e._validate(i),e._setDigit(i,n)})))}},{key:"_onInputFromChange",value:function(){var e=this._getNumber(this.input.value),t=Number(this.slider.dataset.to);e<this.options.min?e=this.options.min:e>t&&(e=this.options.max),this.input.value=e.toString(),this._setDigit(this.input,e),this._update({from:e})}},{key:"_validate",value:function(e){var t=this.options.validate;if(t)switch(t){case"number":this._validateNumber(e);break;case"number_decimal":this._validateNumberDecimal(e)}}},{key:"_validateNumber",value:function(e){var t=/\d*/.exec(e.value);t&&"string"==typeof t[0]&&(e.value=t[0])}},{key:"_validateNumberDecimal",value:function(e){var t=/\d*\.?\d?/g.exec(e.value);t&&"string"==typeof t[0]&&(e.value=t[0])}},{key:"_update",value:function(e){this.ionRangeSliderInstance.update(e)}},{key:"_updateInputs",value:function(e){this._setDigit(this.input,e.from),this.oldFrom=e.from}},{key:"_initDigit",value:function(){this.options.digit&&this.input&&this._setDigit(this.input)}},{key:"_setDigit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.options.digit){var i=t||e.value,n=this._getNumber(i.toString()).toString();e.value=_.c.convertToDigit(n)}}},{key:"_getNumber",value:function(e){return e?_.c.convertToNumber(e):0}}],i&&m(t.prototype,i),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),h=c;function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function x(e,t,i){return(t=w(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function w(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}var k="is-disabled",S="is-hidden",L=new o.Z,P=new a,E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"wrapper",void 0),x(this,"minMonthlyPayment","0"),x(this,"rangeSliders",[]),x(this,"sliders",void 0),x(this,"resultHeading",void 0),x(this,"programResult",void 0),x(this,"programNoResult",void 0),x(this,"programs",void 0),x(this,"mortgageProgramsCount",void 0),x(this,"mortgageAmount",void 0),x(this,"mortgagePercent",void 0),x(this,"resetFilters",void 0),x(this,"flatPrice",null),x(this,"queryData",void 0),x(this,"priceSlider",void 0),x(this,"firstPaymentSlider",void 0),x(this,"limitationSlider",void 0),this.wrapper=t,this._setInitialElements()}var t,i,n;return t=e,n=[{key:"setInput",value:function(e,t){t.input.value=e.toLocaleString("ru-Ru")}},{key:"calcMonthlyPay",value:function(e){var t=e/12/100,i=12*P.getAccessStorage("limitation[min]"),n=t*Math.pow(1+t,i)/(Math.pow(1+t,i)-1)*P.getAccessStorage("creditAmount");return n<0?"—":n}}],(i=[{key:"init",value:function(){this._subscribes(),this._initCalcSliders(),this._bindEvents(),this._setMinimalPayment(),this._setShareParam(!1)}},{key:"updateSlidersValues",value:function(t,i){this._updateData(t,i),e.setInput(Number(t.from),t),this._setCredit()}},{key:"update",value:function(){this._setPaymentOnTable(),this._disableItems(),this._setOrdersCount(),this._checkEmptyResult(),this._setOrder(),this._setMinimalPayment()}},{key:"_setInitialElements",value:function(){this.sliders=g(this.wrapper.querySelectorAll(".j-range-slider"))||[],this.resultHeading=this.wrapper.querySelector(".j-mortgage-calculator__mortgage-heading"),this.programResult=this.wrapper.querySelector(".j-mortgage-calculator__programs-result"),this.programNoResult=this.wrapper.querySelector(".j-mortgage-calculator__programs-no-result"),this.programs=g(this.wrapper.querySelectorAll(".j-mortgage-calculator__program"))||[],this.mortgageProgramsCount=this.wrapper.querySelector(".j-mortgage-calculator__orders-count"),this.mortgageAmount=this.wrapper.querySelector(".j-mortgage-calculator__mortgage-amount"),this.mortgagePercent=this.wrapper.querySelector(".j-mortgage-calculator__percent"),this.resetFilters=this.wrapper.querySelector(".j-mortgage-calculator__reset")||null}},{key:"_initCalcSliders",value:function(){var e,t=this;this.sliders.forEach((function(e){t._initSlider(e)})),this._setSlidersElements(),this._correctFirstPayment(),this.flatPrice=(null===(e=this.priceSlider)||void 0===e?void 0:e.oldFrom)||null,this._setGetQueryValue()}},{key:"_initSlider",value:function(e){var t=new h({wrapper:e});t.init(),this.rangeSliders.push(t)}},{key:"_subscribes",value:function(){var e=this;L.subscribe("rangeSlider:start",(function(t,i){t.input=i.input,t.rangeSlider=i,e.updateSlidersValues(t),e._manualInput(t),e.update()})),L.subscribe("rangeSlider:change",(function(t){e.updateSlidersValues(t,"set"),e.update()})),L.subscribe("rangeSlider:finish",(function(){e._setCredit(),e._setShareParam(!0)}))}},{key:"_bindEvents",value:function(){var e=this;this.resetFilters&&this.resetFilters.addEventListener("click",(function(){e._resetData()}))}},{key:"_resetData",value:function(){L.publish("ionRangeSlider:reset"),this.update(),window.history.pushState(null,"",window.location.pathname)}},{key:"_updateData",value:function(e,t){var i=e.input.getAttribute("name");if(i){var n=e.input.disabled,r=_.c.getUrlParams(i);r&&parseInt(r)&&"set"!==t&&!n?e.from=parseInt(r):e.from=parseInt("".concat(e.from)),P.saveToStorage(i,e.from)}}},{key:"_setCredit",value:function(){var e=P.calcCredit(),t=parseInt(e.percent)>=90?"add":"remove";this.mortgageAmount.innerHTML=e.amount,this.mortgagePercent.innerHTML=e.percent,this.mortgagePercent.classList[t]("is-error")}},{key:"_manualInput",value:function(e){this._chooseInputInteraction(e,"focus"),this._chooseInputInteraction(e,"blur"),this._chooseInputInteraction(e,"keyup"),this._chooseInputInteraction(e,"keydown")}},{key:"_chooseInputInteraction",value:function(t,i){var n=/[^0-9.]/g,r=this;t.input.addEventListener(i,(function(a){var o=this;switch(i){case"focus":o.value="";break;case"blur":var s,l;""===o.value?e.setInput(Number(t.from),t):(P.checkInputData(o,t,n),r.updateSlidersValues(t,"set"),null===(s=t.rangeSlider)||void 0===s||null===(l=s.ionRangeSliderInstance)||void 0===l||l.update(),r.update());break;case"keyup":o.value&&e.setInput(Number(o.value.replace(n,"")),t);break;case"keydown":P.preventNaNSymbolsEnter(a),P.onKeyDownEvent(a,t,r,o,n);break;default:console.error("Wrong type of interaction")}}))}},{key:"_setPaymentOnTable",value:function(){var e=this;this.programs.forEach((function(t){e._calcPaymentForBank(t)}))}},{key:"_calcPaymentForBank",value:function(t){var i=Number(t.querySelector(".j-mortgage-calculator__rate").dataset.rate),n=t.querySelector(".j-mortgage-calculator__payment");n&&(n.innerHTML=P.isExist(e.calcMonthlyPay(i))?P.calcString("monthlyPaymentPretty",e.calcMonthlyPay(i),null):"—",n.dataset.payment=P.isExist(e.calcMonthlyPay(i))?"".concat(parseInt(e.calcMonthlyPay(i).toFixed())):"—")}},{key:"_disableItems",value:function(){var e=this;this.programs.forEach((function(t){e._setDisabled(t)}))}},{key:"_setDisabled",value:function(e){var t=e.querySelector(".j-mortgage-calculator__payment"),i=e.querySelector(".j-mortgage-calculator__first-payment"),n=Number(i.dataset.firstPayment),r=Number(i.dataset.firstPaymentMax),a=e.querySelector(".j-mortgage-calculator__limitation"),o=Number(a.dataset.limitation),s=Number(a.dataset.limitationMin);P.getAccessStorage("creditPercent")<n||P.getAccessStorage("creditPercent")>r||P.getAccessStorage("limitation[min]")>o||P.getAccessStorage("limitation[min]")<s?(t.innerHTML="—",e.classList.add(k)):e.classList.remove(k)}},{key:"_setOrdersCount",value:function(){var e=this._activePrograms().length,t=_.c.pluralWord(e,["Подходит","Подходят","Подходят"]),i=_.c.pluralWord(e,["предложение","предложения","предложений"]);this.mortgageProgramsCount.innerText="".concat(t," ").concat(e," ").concat(i)}},{key:"_checkEmptyResult",value:function(){var e=Boolean(!this._activePrograms().length),t=e?"add":"remove",i=e?"remove":"add";this.programResult.classList[t](S),this.resultHeading.classList[t](S),this.programNoResult.classList[i](S),L.publish("mortgage:noResult",!e)}},{key:"_setOrder",value:function(){var e=this;this.programs.forEach((function(t){e._setItemOrder(t)}))}},{key:"_setItemOrder",value:function(e){var t=1e7,i=Number(e.querySelector(".j-mortgage-calculator__payment").innerHTML.replace(/[^0-9]/g,""));e.setAttribute("data-payment","".concat(0===i?t:i)),e.dataset.sort&&!e.classList.contains(k)&&(i=Number(e.dataset.sort)),e.style.order="".concat(0===i?t:i)}},{key:"_setMinimalPayment",value:function(){var e=g(this.wrapper.querySelectorAll(".j-mortgage-calculator__payment")),t=[];e.forEach((function(e){var i=e;i.dataset.payment&&t.push(Number(i.dataset.payment))}));var i=t.sort((function(e,t){return e-t}));this.minMonthlyPayment=i.length?"".concat(i[0]):"0",this.wrapper.dataset.minMonthly=this.minMonthlyPayment,L.publish("monthlyPayment:updated",this.minMonthlyPayment)}},{key:"_setShareParam",value:function(e){var t=new URLSearchParams,i=window.location.hash;t.append("price[min]","".concat(P.getAccessStorage("price[min]"))),t.append("first-pay[min]","".concat(P.getAccessStorage("first-pay[min]"))),t.append("limitation[min]","".concat(P.getAccessStorage("limitation[min]"))),e&&window.history.pushState(null,"","?".concat(t.toString()).concat(i))}},{key:"_activePrograms",value:function(){return this.programs.filter((function(e){return!e.classList.contains("is-disabled")}))}},{key:"_setGetQueryValue",value:function(){var e=this;this.queryData=P.getQueryData(),this.queryData&&this.rangeSliders.forEach((function(t){var i=t.input,n=null==i?void 0:i.name,r=e.queryData[n];r&&Number(r)>t.options.min&&("first-pay[min]"===n?(t.oldFrom=e.flatPrice&&r>.9*e.flatPrice?.9*e.flatPrice:r,i.value=_.c.convertToDigit("".concat(t.oldFrom)),e._updateFirstPaymentInstance(t)):i.value=_.c.convertToDigit(r)),"price[min]"!==n&&"price"!==t.slider.id||e._setCredit()}))}},{key:"_setSlidersElements",value:function(){this.rangeSliders.length&&(this.priceSlider=this.rangeSliders.find((function(e){return"price"===e.slider.id})),this.firstPaymentSlider=this.rangeSliders.find((function(e){return"first-pay"===e.slider.id})),this.limitationSlider=this.rangeSliders.find((function(e){return"limitation"===e.slider.id})))}},{key:"_correctFirstPayment",value:function(){var e;null!==(e=this.priceSlider)&&void 0!==e&&e.oldFrom&&(this.flatPrice=Number(this.priceSlider.oldFrom),this._updateFirstPayment(this.flatPrice),this._setCredit(),this.update())}},{key:"_updateFirstPayment",value:function(e){this.firstPaymentSlider&&(this.firstPaymentSlider.oldFrom=parseInt(P.calcCredit().percent)>=90?Math.floor(.9*e):this.firstPaymentSlider.oldFrom,this._updateFirstPaymentInstance(this.firstPaymentSlider))}},{key:"_updateFirstPaymentInstance",value:function(e){var t;null===(t=e.ionRangeSliderInstance)||void 0===t||t.update({max:Number(this.flatPrice),from:Number(e.oldFrom),to:Number(this.flatPrice)})}}])&&b(t.prototype,i),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);
//# sourceMappingURL=mortgage-calculator.aee36c934e3d5a60.js.map