{"version":3,"file":"js/chunks/price-monthly-payment.124050b075300540.js","mappings":"u+BAKA,IAAMA,EAAsB,IAAIC,EAAAA,EAE1BC,EAAK,WAWP,SAAAA,EAAYC,I,4FAAsBC,CAAA,KAAAF,GAVlCG,EAAA,oCAEAA,EAAA,8BAEAA,EAAA,oBAEAA,EAAA,oCAEAA,EAAA,4BAGIC,KAAKC,qBAAuBJ,EAAQK,QACpCF,KAAKG,eAAiBN,EAAQO,SAAW,KACzCJ,KAAKK,KAAOR,EAAQQ,MAAQ,KAC5BL,KAAKM,qBAAuBN,KAAKC,qBAC5BM,cAAc,+BAAgD,KACnEP,KAAKQ,aAAeR,KAAKC,qBACpBM,cAAc,4BAAiD,IACxE,C,UA4CC,O,EA5CAX,G,EAAA,EAAAa,IAAA,OAAAC,MAEM,WACHV,KAAKW,qBACLX,KAAKY,mBACLZ,KAAKa,aACT,GAEA,CAAAJ,IAAA,qBAAAC,MAGQ,WACCV,KAAKM,sBAAyBN,KAAKG,iBAIxCH,KAAKM,qBAAqBQ,UAAYC,EAAAA,EAAAA,eAAqBf,KAAKG,gBAEhEH,KAAKC,qBAAqBe,UAAUC,IAAI,aAC5C,GAAC,CAAAR,IAAA,mBAAAC,MAEO,WACCV,KAAKQ,cAAiBR,KAAKK,OAIhCL,KAAKQ,aAAaH,KAAO,IAAHa,OAAOlB,KAAKK,MACtC,GAAC,CAAAI,IAAA,cAAAC,MAEO,WAAW,IAAAS,EAAA,KACfzB,EAAS0B,UAAU,0BAA0B,SAACC,GAC1CF,EAAKhB,eAAiBkB,EACtBF,EAAKR,oBACT,IAEAjB,EAAS0B,UAAU,qBAAqB,SAACE,GACrCH,EAAKI,aAAaD,EACtB,GACJ,GAAC,CAAAb,IAAA,eAAAC,MAEO,SAAaY,GACjB,IAAME,EAASF,EAAQ,SAAW,MAElCtB,KAAKC,qBAAqBe,UAAUQ,GAAQ,WAChD,M,8EAAC5B,CAAA,CA/DM,GAkEX,W","sources":["webpack://multi-kelnik-2.0/./frontend/src/components/price/index.ts"],"sourcesContent":["import type {IPrice, IPriceOptions} from './types';\r\nimport type {IObserver} from '@/common/scripts/types/observer';\r\nimport Observer from '@/common/scripts/observer';\r\nimport {Utils} from '@/common/scripts/utils';\r\n\r\nconst observer: IObserver = new Observer();\r\n\r\nclass Price implements IPrice {\r\n    // Элемент обертка для блока месячного платежа ипотеки\r\n    private mortgagePriceWrapper: HTMLElement;\r\n    // Сумма ежемесячного платежа\r\n    private monthlyPayment: string | null;\r\n    // ID ссылки на блок ипотеки\r\n    private readonly href: string | null;\r\n    // Поле со значением месячного платежа ипотеки\r\n    private readonly mortgageMonthlyField: HTMLElement | null;\r\n    // Ссылка на блок ипотеки\r\n    private mortgageLink: HTMLLinkElement | null;\r\n    constructor(options: IPriceOptions) {\r\n        this.mortgagePriceWrapper = options.element;\r\n        this.monthlyPayment = options.payment || null;\r\n        this.href = options.href || null;\r\n        this.mortgageMonthlyField = this.mortgagePriceWrapper\r\n            .querySelector('.j-price__mortgage-monthly') as HTMLElement || null;\r\n        this.mortgageLink = this.mortgagePriceWrapper\r\n            .querySelector('.j-price__mortgage-link') as HTMLLinkElement || null;\r\n    }\r\n\r\n    public init(): void {\r\n        this._setMonthlyPayment();\r\n        this._setMortgageLink();\r\n        this._subscribes();\r\n    }\r\n\r\n    /**\r\n     * Отображаем блок с суммой минимального месячного платежа\r\n     */\r\n    private _setMonthlyPayment(): void {\r\n        if (!this.mortgageMonthlyField || !this.monthlyPayment) {\r\n            return;\r\n        }\r\n\r\n        this.mortgageMonthlyField.innerText = Utils.convertToDigit(this.monthlyPayment);\r\n\r\n        this.mortgagePriceWrapper.classList.add('is-active');\r\n    }\r\n\r\n    private _setMortgageLink(): void {\r\n        if (!this.mortgageLink || !this.href) {\r\n            return;\r\n        }\r\n\r\n        this.mortgageLink.href = `#${this.href}`;\r\n    }\r\n\r\n    private _subscribes(): void {\r\n        observer.subscribe('monthlyPayment:updated', (price: string) => {\r\n            this.monthlyPayment = price;\r\n            this._setMonthlyPayment();\r\n        });\r\n\r\n        observer.subscribe('mortgage:noResult', (state: boolean) => {\r\n            this._setNoResult(state);\r\n        });\r\n    }\r\n\r\n    private _setNoResult(state: boolean): void {\r\n        const method = state ? 'remove' : 'add';\r\n\r\n        this.mortgagePriceWrapper.classList[method]('is-empty');\r\n    }\r\n}\r\n\r\nexport default Price;\r\n"],"names":["observer","Observer","Price","options","_classCallCheck","_defineProperty","this","mortgagePriceWrapper","element","monthlyPayment","payment","href","mortgageMonthlyField","querySelector","mortgageLink","key","value","_setMonthlyPayment","_setMortgageLink","_subscribes","innerText","Utils","classList","add","concat","_this","subscribe","price","state","_setNoResult","method"],"sourceRoot":""}