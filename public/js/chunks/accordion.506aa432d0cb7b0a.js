"use strict";(self.webpackChunkmulti_kelnik_2_0=self.webpackChunkmulti_kelnik_2_0||[]).push([[209],{1075:function(t,e,i){var n;i.r(e),i.d(e,{default:function(){return g}}),function(t){t.OPEN="open",t.CLOSE="close"}(n||(n={}));var o=i(6163),r=i(8574),s=i(281);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},c.apply(this,arguments)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=h(t);if(e){var o=h(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function b(t,e,i){return e&&p(t.prototype,e),i&&p(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e,i){return(e=m(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}var v=new o.Z,d="is-open",g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(i,t);var e=a(i);function i(){return f(this,i),e.apply(this,arguments)}return b(i,[{key:"_subscribe",value:function(){v.subscribe("closeAccordion",this.close),v.subscribe("openAccordion",this.open)}},{key:"_setInitState",value:function(){c(h(i.prototype),"_setInitState",this).call(this),this._setContentHeight(this.isOpen===n.OPEN?this.height:0)}}]),i}(function(){function t(){f(this,t),y(this,"options",void 0),y(this,"isOpen",n.CLOSE),y(this,"height",void 0),y(this,"element",void 0),y(this,"isCloseTimeout",!1),y(this,"toggler",null),y(this,"content",void 0),y(this,"contentOuter",null),y(this,"title",void 0),y(this,"titleText",""),y(this,"hiddenText","Скрыть"),y(this,"isChangeTitle",!1),y(this,"timeout",300),y(this,"blockElement",void 0),this.close=this.close.bind(this),this.open=this.open.bind(this)}return b(t,[{key:"init",value:function(t){this._setElements(t),this._setInitState(),this._subscribe(),this._bindEvents()}},{key:"reinit",value:function(){this._setInitState()}},{key:"open",value:function(){this.isChangeTitle&&this.titleText&&(s.c.clearHtml(this.title),s.c.insetContent(this.title,this.hiddenText)),this.element.classList.add(d),this.isOpen=n.OPEN,this._setContentHeight(this.height),setTimeout((function(){v.publish("accordion:open")}),this.timeout)}},{key:"close",value:function(){var t=this;this.isChangeTitle&&this.titleText&&(s.c.clearHtml(this.title),s.c.insetContent(this.title,this.titleText)),this.blockElement&&this._scrollToElement(),setTimeout((function(){t.element.classList.remove(d),t.isOpen=n.CLOSE,t._setContentHeight(0),v.publish("accordion:close")}),this.isCloseTimeout?this.timeout:0)}},{key:"_setInitState",value:function(){this.height=this._getHeight(),this.isOpen=this.element.classList.contains(d)?n.OPEN:n.CLOSE,this.titleText=this.title&&this.element.dataset.initialTitle||"",this.isChangeTitle=Boolean(this.element.dataset.changeTitle),this.hiddenText=this.element.dataset.alternateTitle||this.hiddenText,this.title&&(this.title.innerHTML=this.titleText)}},{key:"_setContentHeight",value:function(t){if(!this.contentOuter)throw new Error("Необходимо указать элемент 'contentOuter': ".concat(this.options.selectors.contentOuter));this.contentOuter.style.height=t?"".concat(t,"px"):"".concat(t)}},{key:"_subscribe",value:function(){throw new Error("Метод _subscribe должен быть переопределен")}},{key:"_setElements",value:function(t){this.options=t;var e=this.options.selectors;this.element=t.element,this.isCloseTimeout=t.isCloseTimeout,this.toggler=t.element.querySelector(e.toggler),this.content=t.element.querySelector(e.content),this.contentOuter=t.element.querySelector(e.contentOuter),this.title=t.element.querySelector(e.title),e.blockElement&&(this.blockElement=t.element.closest(e.blockElement))}},{key:"_getHeight",value:function(){if(!this.content)throw new Error("Необходимо указать элемент 'content': ".concat(this.options.selectors.content));return this.content.offsetHeight}},{key:"_bindEvents",value:function(){var t=this;this.toggler&&this.toggler.addEventListener("click",this._onTogglerClick.bind(this));["resize","orientationchange"].forEach((function(e){window.addEventListener(e,t._onResize.bind(t))}))}},{key:"_onTogglerClick",value:function(){var t=this.isOpen===n.OPEN?this.close:this.open;this.height=this._getHeight(),t()}},{key:"_onResize",value:function(){this.isOpen&&this._update()}},{key:"_update",value:function(){this.height=this._getHeight(),this._setContentHeight(this.isOpen===n.OPEN?this.height:0)}},{key:"_scrollToElement",value:function(){if(this.blockElement){var t=this.blockElement.getBoundingClientRect().top+pageYOffset-2*this.blockElement.offsetTop;new r.Z({targetY:t}).scroll()}}}]),t}())},8574:function(t,e){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function o(t,e,i){return(e=r(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}var s=function(){function t(e){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"targetY",void 0),o(this,"duration",void 0),o(this,"start",void 0),o(this,"startY",void 0),o(this,"animationName",void 0),this.targetY=null!==(i=e.targetY)&&void 0!==i?i:0,this.duration=e.duration||600,this.start=0,this.startY=window.pageYOffset}var e,i,r;return e=t,i=[{key:"scroll",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(t||this.targetY)-this.startY-i;this.animationName=window.requestAnimationFrame(function t(i){e.start||(e.start=i);var o=i-e.start,r=Math.min(o/e.duration,1);window.scrollTo(0,e.startY+n*r),o<e.duration&&(e.animationName=window.requestAnimationFrame(t.bind(e)))}.bind(this))}}],i&&n(e.prototype,i),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Z=s}}]);
//# sourceMappingURL=accordion.506aa432d0cb7b0a.js.map