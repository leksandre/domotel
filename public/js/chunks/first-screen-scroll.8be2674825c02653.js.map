{"version":3,"file":"js/chunks/first-screen-scroll.8be2674825c02653.js","mappings":"89BAGA,IAEMA,EAAiB,WAMnB,SAAAA,EAAYC,I,4FAAkCC,CAAA,KAAAF,GAAAG,EAAA,+BAAAA,EAAA,uBAAAA,EAAA,uBAAAA,EAAA,sBAC1CC,KAAKC,QAAUJ,EAAQI,QACvBD,KAAKE,gBAAkBL,EAAQK,iBAAmB,gBACtD,C,UAoDC,O,EApDAN,G,EAAA,EAAAO,IAAA,OAAAC,MAEM,WACHJ,KAAKK,eACLL,KAAKM,aACLN,KAAKO,aACT,GAAC,CAAAJ,IAAA,eAAAC,MAEO,WACJJ,KAAKQ,QAAUC,SAASC,cAAcV,KAAKE,gBAC/C,GAAC,CAAAC,IAAA,aAAAC,MAEO,WACCJ,KAAKQ,UAIVR,KAAKW,OAASX,KAAKQ,QAAQI,aAC/B,GAAC,CAAAT,IAAA,cAAAC,MAEO,WAAW,IAAAS,EAAA,KACA,CAAC,SAAU,qBAEnBC,SAAQ,SAACC,GACZC,OAAOC,iBAAiBF,EAAOG,EAAAA,EAAAA,SAAeL,EAAKP,WAAWa,KAAKN,GAAO,KAC9E,IAEAb,KAAKC,QAAQgB,iBAAiB,QAASC,EAAAA,EAAAA,SAAelB,KAAKoB,SAASD,KAAKnB,MAAO,KACpF,GAAC,CAAAG,IAAA,WAAAC,MAEO,WAAQ,IAAAiB,EAAA,KACNC,EAAItB,KAAKW,OACTY,EAASP,OAAOQ,YAChBC,EAAOH,EAAIC,EACbG,EAAQ,EAiBZV,OAAOW,sBAfM,SAAPC,EAAQC,GACLH,IACDA,EAAQG,GAGZ,IAAMC,EAAOD,EAAYH,EACnBK,EAAUC,KAAKC,IAAIH,EArDV,IAqDqC,GAEpDd,OAAOkB,SAAS,EAAGX,EAAUE,EAAOM,GAEhCD,EAzDW,KA0DXd,OAAOW,sBAAsBC,EAAKT,KAAKE,GAE/C,EAEkCF,KAAKnB,MAC3C,M,8EAACJ,CAAA,CA7DkB,GAgEvB,W","sources":["webpack://multi-kelnik-2.0/./frontend/src/components/first-screen-scroll/index.ts"],"sourcesContent":["import type {IFirstScreenScroll, IFirstScreenScrollOptions} from './types';\r\nimport {Utils} from '@/common/scripts/utils';\r\n\r\nconst ANIMATION_DURATION = 600;\r\n\r\nclass FirstScreenScroll implements IFirstScreenScroll {\r\n    readonly wrapperSelector: string;\r\n    private element: HTMLElement;\r\n    private wrapper: HTMLElement | null;\r\n    private height: number;\r\n\r\n    constructor(options: IFirstScreenScrollOptions) {\r\n        this.element = options.element;\r\n        this.wrapperSelector = options.wrapperSelector || '.j-main-screen';\r\n    }\r\n\r\n    public init(): void {\r\n        this._setElements();\r\n        this._setHeight();\r\n        this._bindEvents();\r\n    }\r\n\r\n    private _setElements(): void {\r\n        this.wrapper = document.querySelector(this.wrapperSelector) as HTMLElement;\r\n    }\r\n\r\n    private _setHeight(): void {\r\n        if (!this.wrapper) {\r\n            return;\r\n        }\r\n\r\n        this.height = this.wrapper.offsetHeight;\r\n    }\r\n\r\n    private _bindEvents(): void {\r\n        const events = ['resize', 'orientationchange'];\r\n\r\n        events.forEach((event: string) => {\r\n            window.addEventListener(event, Utils.debounce(this._setHeight.bind(this), 100));\r\n        });\r\n\r\n        this.element.addEventListener('click', Utils.debounce(this._onClick.bind(this), 100));\r\n    }\r\n\r\n    private _onClick(): void {\r\n        const y = this.height;\r\n        const startY = window.pageYOffset;\r\n        const diff = y - startY;\r\n        let start = 0;\r\n\r\n        const step = (timestamp: number): void => {\r\n            if (!start) {\r\n                start = timestamp;\r\n            }\r\n\r\n            const time = timestamp - start;\r\n            const percent = Math.min(time / ANIMATION_DURATION, 1);\r\n\r\n            window.scrollTo(0, startY + (diff * percent));\r\n\r\n            if (time < ANIMATION_DURATION) {\r\n                window.requestAnimationFrame(step.bind(this));\r\n            }\r\n        };\r\n\r\n        window.requestAnimationFrame(step.bind(this));\r\n    }\r\n}\r\n\r\nexport default FirstScreenScroll;\r\n"],"names":["FirstScreenScroll","options","_classCallCheck","_defineProperty","this","element","wrapperSelector","key","value","_setElements","_setHeight","_bindEvents","wrapper","document","querySelector","height","offsetHeight","_this","forEach","event","window","addEventListener","Utils","bind","_onClick","_this2","y","startY","pageYOffset","diff","start","requestAnimationFrame","step","timestamp","time","percent","Math","min","scrollTo"],"sourceRoot":""}